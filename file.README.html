<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>Documentation by YARD 0.5.3</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>BEncode 1.0.1</h1>
<ul>
<li><b>Author</b> Allen Madsen (blatyo)

</li>
<li><b>My</b> <b>Site</b> <a
href="http://www.allenmadsen.com">www.allenmadsen.com</a>

</li>
<li><b>Gem</b> <a
href="http://gemcutter.org/gems/bencode_blatyo">gemcutter.org/gems/bencode_blatyo</a>

</li>
<li><b>Source</b> <a
href="http://github.com/blatyo/bencode">github.com/blatyo/bencode</a>

</li>
<li><b>Documentation</b> <a
href="http://blatyo.github.com/bencode">blatyo.github.com/bencode</a>

</li>
<li><b>Issue</b> <b>Tracker</b> <a
href="http://github.com/blatyo/bencode/issues">github.com/blatyo/bencode/issues</a>

</li>
</ul>
<h2>Synopsis</h2>
<p>
This gem provides a way to encode and parse bencodings used by the Bit
Torrent protocol.
</p>
<h2>Installation</h2>
<pre class="code">
    # install the gem
    &gt; gem install bencode_blatyo
    Successfully installed bencode_blatyo-1.0.0
    1 gem installed
    Installing ri documentation for bencode_blatyo-1.0.0...
    Building YARD (yri) index for bencode_blatyo-1.0.0...
    Installing RDoc documentation for bencode_blatyo-1.0.0.

    # somefile.rb
    require 'bencode'
</pre>
<h2>Examples</h2>
<h3>String</h3>
<p>
BEncoded strings are length-prefixed base ten followed by a colon and the
string.
</p>
<pre class="code">
    <span class='comment'># strings
</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id bencode'>bencode</span>              <span class='comment'>#=&gt; &quot;0:&quot;
</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id bencode'>bencode</span>        <span class='comment'>#=&gt; &quot;6:string&quot;
</span>
    <span class='comment'># symbols
</span>    <span class='symbol'>:symbol</span><span class='period'>.</span><span class='id bencode'>bencode</span>         <span class='comment'>#=&gt; &quot;6:symbol&quot;
</span>
    <span class='comment'># URIs
</span>    <span class='id uri'>uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://github.com/blatyo/bencode</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id uri'>uri</span><span class='period'>.</span><span class='id bencode'>bencode</span>             <span class='comment'>#=&gt; &quot;32:http://github.com/blatyo/bencode&quot;
</span></pre>
<h3>Integer</h3>
<p>
Bencoded integers are represented by an &#8216;i&#8217; followed by the
number in base 10 followed by an &#8216;e&#8217;.
</p>
<pre class="code">
    <span class='comment'># integers
</span>    <span class='int'>1</span><span class='period'>.</span><span class='id bencode'>bencode</span>               <span class='comment'>#=&gt; &quot;i1e&quot;
</span>    <span class='op'>-</span><span class='int'>1</span><span class='period'>.</span><span class='id bencode'>bencode</span>              <span class='comment'>#=&gt; &quot;i-1e&quot;
</span>    <span class='int'>10_000_000_000</span><span class='period'>.</span><span class='id bencode'>bencode</span>  <span class='comment'>#=&gt; &quot;i10000000000e&quot;
</span>
    <span class='comment'># other numerics
</span>    <span class='float'>1.1</span><span class='period'>.</span><span class='id bencode'>bencode</span>             <span class='comment'>#=&gt; &quot;i1e&quot;
</span>    <span class='op'>-</span><span class='float'>1e10</span><span class='period'>.</span><span class='id bencode'>bencode</span>           <span class='comment'>#=&gt; &quot;i-10000000000e&quot;
</span>
    <span class='comment'># times
</span>    <span class='const'>Time</span><span class='period'>.</span><span class='id at'>at</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id bencode'>bencode</span>      <span class='comment'>#=&gt; &quot;i4e&quot;
</span></pre>
<h3>List</h3>
<p>
Bencoded lists are encoded as an &#8216;l&#8217; followed by their elements
(also bencoded) followed by an &#8216;e&#8217;.
</p>
<pre class="code">
    <span class='comment'># arrays
</span>    <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id bencode'>bencode</span>                        <span class='comment'>#=&gt; &quot;le&quot;
</span>    <span class='lbracket'>[</span><span class='symbol'>:e</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id at'>at</span><span class='lparen'>(</span><span class='int'>11</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id bencode'>bencode</span> <span class='comment'>#=&gt; &quot;l1:e1:ai1ei11ee&quot;
</span></pre>
<h3>Dictionary</h3>
<p>
Bencoded dictionaries are encoded as a &#8216;d&#8217; followed by a list
of alternating keys and their corresponding values followed by an
&#8216;e&#8217;. Keys appear in sorted order (sorted as raw strings, not
alphanumerics) and are always strings.
</p>
<pre class="code">
    <span class='comment'># hashes
</span>    <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>                          <span class='comment'>#=&gt; &quot;de&quot;
</span>    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>      <span class='comment'>#=&gt; &quot;d6:string6:stringe&quot;
</span>    <span class='lbrace'>{</span><span class='symbol'>:symbol</span> <span class='op'>=&gt;</span> <span class='symbol'>:symbol</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>        <span class='comment'>#=&gt; &quot;d6:symbol6:symbole&quot;
</span>    <span class='lbrace'>{</span><span class='int'>1</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>                    <span class='comment'>#=&gt; &quot;d1:1i1ee&quot;
</span>    <span class='lbrace'>{</span><span class='float'>1.1</span> <span class='op'>=&gt;</span> <span class='float'>1.1</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>                <span class='comment'>#=&gt; &quot;d3:1.1i1ee&quot;
</span>    <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>                  <span class='comment'>#=&gt; &quot;d2:{}dee&quot;
</span>
    <span class='id time'>time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id utc'>utc</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='lbrace'>{</span><span class='id time'>time</span> <span class='op'>=&gt;</span> <span class='id time'>time</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>              <span class='comment'>#=&gt; &quot;d23:2000-01-01 00:00:00 UTCi946684800ee&quot;
</span>
    <span class='id array'>array</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_a'>to_a</span>
    <span class='lbrace'>{</span><span class='id array'>array</span> <span class='op'>=&gt;</span> <span class='id array'>array</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>            <span class='comment'>#=&gt; &quot;d12:[1, 2, 3, 4]li1ei2ei3ei4eee&quot;
</span>
    <span class='comment'># Note: keys are sorted as raw strings.
</span>    <span class='lbrace'>{</span><span class='symbol'>:a</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='op'>=&gt;</span> <span class='int'>1</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id bencode'>bencode</span>  <span class='comment'>#=&gt; &quot;d1:1i1e1:Ai1e1:ai1ee&quot;
</span></pre>
<h3>Encoding and Decoding</h3>
<pre class="code">
    <span class='comment'># encoding is just like calling bencode on the object
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>    <span class='comment'>#=&gt; &quot;6:string&quot;
</span>
    <span class='comment'># decoding takes a string and return either a String, Integer, Array, or Hash
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id decode'>decode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>6:string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'>#=&gt; &quot;string&quot;
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id decode'>decode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>i1e</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>       <span class='comment'>#=&gt; 1
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id decode'>decode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>le</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>        <span class='comment'>#=&gt; []
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id decode'>decode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>de</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>        <span class='comment'>#=&gt; {}
</span>
    <span class='comment'># you can work directly with files too
</span>    <span class='const'>BEncode</span><span class='period'>.</span><span class='id encode_file'>encode_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_awesome.torrent</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:announce</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://www.sometracker.com/announce:80</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='const'>BEncode</span><span class='period'>.</span><span class='id decode_file'>decode_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_awesome.torrent</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {:announce =&gt; &quot;http://www.sometracker.com/announce:80&quot;}
</span></pre>
<h3>Registering Types</h3>
<p>
When using bencodings it may be useful to translate your own objects into
bencoded strings. You can do that with the register methods on each BEncode
type. All register does is define a bencode instance method for the class
that internally uses type conversion. That means if you want to specify a
String type then your class must have a to_s or to_str instance method. The
same goes for all the other types.
</p>
<p>
Keep in mind when registering that if you register a class for two separate
types it will only retain the bencode method of the last type registered
for.
</p>
<pre class="code">
    <span class='comment'># register string type
</span>    <span class='const'>BEncode</span><span class='op'>::</span><span class='const'>String</span><span class='period'>.</span><span class='id register'>register</span> <span class='const'>Range</span>
    <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id bencode'>bencode</span>      <span class='comment'>#=&gt; &quot;4:1..2&quot;
</span>
    <span class='comment'># register integer type
</span>    <span class='const'>BEncode</span><span class='op'>::</span><span class='const'>Integer</span><span class='period'>.</span><span class='id register'>register</span> <span class='const'>NilClass</span>
    <span class='kw'>nil</span><span class='period'>.</span><span class='id bencode'>bencode</span>         <span class='comment'>#=&gt; &quot;i0e&quot;
</span>
    <span class='comment'># register list type
</span>    <span class='const'>BEncode</span><span class='op'>::</span><span class='const'>List</span><span class='period'>.</span><span class='id register'>register</span> <span class='const'>Range</span>
    <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id bencode'>bencode</span>      <span class='comment'>#=&gt; &quot;li1ei2ee&quot;
</span>
    <span class='comment'>#register dictionary type
</span>    <span class='const'>MyClass</span> <span class='op'>=</span> <span class='const'>Class</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span>
      <span class='kw'>def</span> <span class='id to_h'>to_h</span>
        <span class='lbrace'>{</span><span class='symbol'>:a</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:b</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>BEncode</span><span class='op'>::</span><span class='const'>Dictionary</span><span class='period'>.</span><span class='id register'>register</span> <span class='const'>MyClass</span>
    <span class='const'>MyClass</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id bencode'>bencode</span> <span class='comment'>#=&gt; &quot;d1:a1:a1:b1:be&quot;
</span></pre>
<h2>Note on Reporting Issues</h2>
<ul>
<li>Try to make a failing test case

</li>
<li>Tell me which version of ruby you&#8217;re using

</li>
<li>Tell me which OS you are using

</li>
<li>Provide me with any extra files if necessary

</li>
</ul>
<h2>Note on Patches/Pull Requests</h2>
<ul>
<li>Fork the project.

</li>
<li>Make your feature addition or bug fix.

</li>
<li>Add tests for it. This is important so I don&#8217;t break it in a future
version unintentionally.

</li>
<li>Commit, do not mess with rakefile, version, or history. (if you want to
have your own version, that is fine but bump version in a commit by itself
I can ignore when I pull)

</li>
<li>Send me a pull request. Bonus points for topic branches.

</li>
</ul>
<h2>Copyright</h2>
<p>
Copyright &#169; 2010 blatyo. See LICENSE for details.
</p>
</div></div>
    
    <div id="footer">
  Generated on Mon Feb  1 19:29:20 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.3 (ruby-1.9.1).
</div>

  </body>
</html>
